# ЁЯФз р╣Бр╕Бр╣Йр╕Ыр╕▒р╕Нр╕лр╕▓ Login р╣Др╕бр╣Ир╣Др╕Фр╣Й

## р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Йр╕Ыр╕▒р╕Нр╕лр╕▓р╣Ар╕гр╣Ир╕Зр╕Фр╣Ир╕зр╕Щ

### 1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ

```bash
python3 check_admin.py
# р╣Ар╕ер╕╖р╕нр╕Б 2 (р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ)
# р╣Гр╕кр╣И username р╣Бр╕ер╕░ password р╕Вр╕нр╕Зр╕Др╕╕р╕У
```

### 2. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щр╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З

```bash
python3 check_admin.py
# р╣Ар╕ер╕╖р╕нр╕Б 2 (р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ)
# р╣Гр╕кр╣И username р╣Бр╕ер╕░ password р╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ
```

### 3. р╣Бр╕кр╕Фр╕Зр╕гр╕▓р╕вр╕Бр╕▓р╕г Admin Users р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф

```bash
python3 check_admin.py
# р╣Ар╕ер╕╖р╕нр╕Б 1 (р╣Бр╕кр╕Фр╕Зр╕гр╕▓р╕вр╕Бр╕▓р╕г Admin Users)
```

### 4. р╕кр╕гр╣Йр╕▓р╕З Admin User р╣Гр╕лр╕бр╣И

```bash
python3 check_admin.py
# р╣Ар╕ер╕╖р╕нр╕Б 4 (р╕кр╕гр╣Йр╕▓р╕З/р╕нр╕▒р╕Юр╣Ар╕Фр╕Ч Admin User)
# р╣Гр╕кр╣И username р╣Бр╕ер╕░ password р╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕г
```

## р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╕Ыр╕▒р╕Нр╕лр╕▓р╣Бр╕Ър╕Ър╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф

### р╕Ыр╕▒р╕Нр╕лр╕▓: Login р╣Др╕бр╣Ир╣Др╕Фр╣Йр╣Бр╕бр╣Йр╕зр╣Ир╕▓р╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щр╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З

**р╕кр╕▓р╣Ар╕лр╕Хр╕╕р╕Чр╕╡р╣Ир╣Ар╕Ыр╣Зр╕Щр╣Др╕Ыр╣Др╕Фр╣Й:**

1. **Hash р╣Др╕бр╣Ир╕Хр╕гр╕Зр╕Бр╕▒р╕Щ** - р╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щр╣Гр╕Щ database р╕нр╕▓р╕Ир╕Цр╕╣р╕Бр╣Ар╕Вр╣Йр╕▓р╕гр╕лр╕▒р╕кр╕Фр╣Йр╕зр╕вр╕зр╕┤р╕Шр╕╡р╕нр╕╖р╣Ир╕Щ

   **р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Й:**
   ```bash
   # р╕гр╕╡р╣Ар╕Лр╣Зр╕Хр╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щр╣Гр╕лр╕бр╣И
   python3 check_admin.py << EOF
   3
   admin
   your-new-password
   EOF
   ```

2. **Session р╣Др╕бр╣Ир╕Чр╕│р╕Зр╕▓р╕Щ** - Flask session р╕нр╕▓р╕Ир╕бр╕╡р╕Ыр╕▒р╕Нр╕лр╕▓

   **р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Й:**
   - р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕бр╕╡ `SECRET_KEY` р╣Гр╕Щ `.env`
   - р╕ер╕Ъ cookies р╣Гр╕Щр╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣М
   - р╕ер╕нр╕Зр╣Гр╕Кр╣Й Incognito/Private mode

3. **Database connection р╕ер╣Йр╕бр╣Ар╕лр╕ер╕з**

   **р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Й:**
   - р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ `POSTGRES_URL_NON_POOLING` р╣Гр╕Щ `.env`
   - р╕Чр╕Фр╕кр╕нр╕Ъ connection:
   ```bash
   python3 -c "from check_admin import get_db_connection; conn = get_db_connection(); print('OK' if conn else 'FAIL')"
   ```

### р╕Ыр╕▒р╕Нр╕лр╕▓: р╕Хр╕▓р╕гр╕▓р╕З admin_users р╣Др╕бр╣Ир╕бр╕╡

**р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Й:**

1. р╕гр╕▒р╕Щ Flask app р╕Др╕гр╕▒р╣Йр╕Зр╣Бр╕гр╕Бр╣Ар╕Юр╕╖р╣Ир╕нр╕кр╕гр╣Йр╕▓р╕Зр╕Хр╕▓р╕гр╕▓р╕З:
   ```bash
   python3 app.py
   ```

2. р╕лр╕гр╕╖р╕нр╕кр╕гр╣Йр╕▓р╕Зр╕Хр╕▓р╕гр╕▓р╕Зр╕Фр╣Йр╕зр╕в SQL:
   ```sql
   CREATE TABLE IF NOT EXISTS admin_users (
       id SERIAL PRIMARY KEY,
       username VARCHAR(255) UNIQUE NOT NULL,
       password_hash VARCHAR(255) NOT NULL,
       created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
   );
   ```

3. р╕Ир╕▓р╕Бр╕Щр╕▒р╣Йр╕Щр╕кр╕гр╣Йр╕▓р╕З admin user:
   ```bash
   python3 check_admin.py << EOF
   5
   EOF
   ```

### р╕Ыр╕▒р╕Нр╕лр╕▓: р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щр╣Гр╕Щ Supabase р╣Бр╕ер╣Йр╕зр╣Бр╕Хр╣И login р╣Др╕бр╣Ир╣Др╕Фр╣Й

**р╕кр╕▓р╣Ар╕лр╕Хр╕╕:** р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щр╣Гр╕Щ Supabase р╕Хр╣Йр╕нр╕Зр╣Гр╕Кр╣Й SHA-256 hash

**р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Йр╕Чр╕╡р╣Ир╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З:**

**р╕зр╕┤р╕Шр╕╡р╕Чр╕╡р╣И 1: р╣Гр╕Кр╣Й check_admin.py (р╣Бр╕Щр╕░р╕Щр╕│)**
```bash
python3 check_admin.py
# р╣Ар╕ер╕╖р╕нр╕Б 3 (р╕гр╕╡р╣Ар╕Лр╣Зр╕Хр╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ)
```

**р╕зр╕┤р╕Шр╕╡р╕Чр╕╡р╣И 2: р╣Гр╕Кр╣Й SQL р╣Гр╕Щ Supabase**
```sql
-- р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щр╣Ар╕Ыр╣Зр╕Щ 'newpassword'
UPDATE admin_users 
SET password_hash = encode(digest('newpassword', 'sha256'), 'hex')
WHERE username = 'admin';
```

**р╕зр╕┤р╕Шр╕╡р╕Чр╕╡р╣И 3: р╣Гр╕Кр╣Й Python**
```python
import hashlib
password = 'your-new-password'
hash_value = hashlib.sha256(password.encode()).hexdigest()
print(f"Hash: {hash_value}")
# р╕Щр╕│ hash р╣Др╕Ыр╕нр╕▒р╕Юр╣Ар╕Фр╕Чр╣Гр╕Щ Supabase
```

## р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ Login

### р╕Чр╕Фр╕кр╕нр╕Ър╕Ьр╣Ир╕▓р╕Щ Web Browser

1. р╣Ар╕Ыр╕┤р╕Ф http://localhost:5001/login
2. р╕Бр╕гр╕нр╕Б username р╣Бр╕ер╕░ password
3. р╕Фр╕╣ Console р╣Гр╕Щ Browser (F12) р╣Ар╕Юр╕╖р╣Ир╕нр╕Фр╕╣ error

### р╕Чр╕Фр╕кр╕нр╕Ър╕Ьр╣Ир╕▓р╕Щ API

```bash
# р╕Хр╣Йр╕нр╕Зр╕гр╕▒р╕Щ Flask app р╕Бр╣Ир╕нр╕Щ
python3 test_login.py
```

р╕лр╕гр╕╖р╕нр╣Гр╕Кр╣Й curl:
```bash
curl -X POST http://localhost:5001/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}'
```

## Debug Mode

р╣Ар╕Ыр╕┤р╕Ф debug logging р╣Гр╕Щ Flask:

```python
# р╣Гр╕Щ app.py
app.config['DEBUG'] = True

# р╕лр╕гр╕╖р╕нр╕гр╕▒р╕Щр╕Фр╣Йр╕зр╕в
python3 app.py
```

р╕Фр╕╣ log р╣Гр╕Щ terminal р╣Ар╕бр╕╖р╣Ир╕нр╕Юр╕вр╕▓р╕вр╕▓р╕б login:
- `ЁЯФР Login attempt - Username: ...`
- `ЁЯФС Password hash: ...`
- `тЬЕ User found: ...`
- `ЁЯУЭ Stored hash: ...`
- `ЁЯФН Match: ...`

## р╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Чр╕╡р╣Ир╕бр╕╡р╕Ыр╕гр╕░р╣Вр╕вр╕Кр╕Щр╣М

### р╕Фр╕╣ admin users р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
```bash
python3 check_admin.py
# р╣Ар╕ер╕╖р╕нр╕Б 1
```

### р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ
```bash
python3 check_admin.py
# р╣Ар╕ер╕╖р╕нр╕Б 2
# р╣Гр╕кр╣И username р╣Бр╕ер╕░ password
```

### р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ
```bash
python3 check_admin.py
# р╣Ар╕ер╕╖р╕нр╕Б 3
# р╣Гр╕кр╣И username р╣Бр╕ер╕░р╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щр╣Гр╕лр╕бр╣И
```

### р╕кр╕гр╣Йр╕▓р╕З admin р╣Гр╕лр╕бр╣И
```bash
python3 check_admin.py
# р╣Ар╕ер╕╖р╕нр╕Б 4
# р╣Гр╕кр╣И username р╣Бр╕ер╕░ password р╣Гр╕лр╕бр╣И
```

## р╕Хр╕┤р╕Фр╕Хр╣Ир╕нр╕Вр╕нр╕Др╕зр╕▓р╕бр╕Кр╣Ир╕зр╕вр╣Ар╕лр╕ер╕╖р╕н

р╕лр╕▓р╕Бр╕вр╕▒р╕Зр╣Бр╕Бр╣Йр╣Др╕Вр╣Др╕бр╣Ир╣Др╕Фр╣Й р╣Гр╕лр╣Йр╕гр╕зр╕Ър╕гр╕зр╕бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕лр╕ер╣Ир╕▓р╕Щр╕╡р╣Й:

1. Output р╕Ир╕▓р╕Б `python3 check_admin.py` (р╣Ар╕ер╕╖р╕нр╕Б 1)
2. Output р╕Ир╕▓р╕Б `python3 check_admin.py` (р╣Ар╕ер╕╖р╕нр╕Б 2 р╕Юр╕гр╣Йр╕нр╕б username/password)
3. Log р╕Ир╕▓р╕Б Flask app р╣Ар╕бр╕╖р╣Ир╕нр╕Юр╕вр╕▓р╕вр╕▓р╕б login
4. Screenshot р╕Вр╕нр╕Зр╕лр╕Щр╣Йр╕▓ login р╣Бр╕ер╕░ Console (F12)
