# ü§ñ ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Telegram Bot ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

## ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏™‡∏£‡πâ‡∏≤‡∏á Telegram Bot

1. ‡πÄ‡∏õ‡∏¥‡∏î Telegram ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ **@BotFather**
2. ‡∏û‡∏¥‡∏°‡∏û‡πå `/newbot`
3. ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠ bot (‡πÄ‡∏ä‡πà‡∏ô "Trade-In Report Bot")
4. ‡∏ï‡∏±‡πâ‡∏á username (‡∏ï‡πâ‡∏≠‡∏á‡∏•‡∏á‡∏ó‡πâ‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢ "bot" ‡πÄ‡∏ä‡πà‡∏ô "tradein_report_bot")
5. ‡∏à‡∏∞‡πÑ‡∏î‡πâ **Bot Token** ‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ:
   ```
   123456789:ABCdefGHIjklMNOpqrsTUVwxyz
   ```
6. **‡πÄ‡∏Å‡πá‡∏ö Token ‡πÑ‡∏ß‡πâ‡πÉ‡∏´‡πâ‡∏î‡∏µ!**

## ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏´‡∏≤ Chat ID

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡πÉ‡∏ä‡πâ Bot
1. ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ bot ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ô Telegram (‡πÉ‡∏ä‡πâ username ‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ)
2. ‡∏Å‡∏î **Start** ‡∏´‡∏£‡∏∑‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå `/start`
3. ‡πÄ‡∏õ‡∏¥‡∏î browser ‡πÑ‡∏õ‡∏ó‡∏µ‡πà:
   ```
   https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getUpdates
   ```
   (‡πÅ‡∏ó‡∏ô `<YOUR_BOT_TOKEN>` ‡∏î‡πâ‡∏ß‡∏¢ Token ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ)
4. ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô JSON ‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ:
   ```json
   {
     "ok": true,
     "result": [{
       "message": {
         "chat": {
           "id": 123456789,  ‚Üê ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠ Chat ID
           "first_name": "Your Name"
         }
       }
     }]
   }
   ```
5. **‡πÄ‡∏Å‡πá‡∏ö Chat ID ‡πÑ‡∏ß‡πâ!**

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡πÉ‡∏ä‡πâ @userinfobot
1. ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ **@userinfobot** ‡πÉ‡∏ô Telegram
2. ‡∏Å‡∏î Start
3. ‡∏à‡∏∞‡πÑ‡∏î‡πâ Chat ID ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

## ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö

### ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Telegram ‡πÉ‡∏ô localStorage

‡πÄ‡∏õ‡∏¥‡∏î Browser Console (F12) ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö Trade-In ‡πÅ‡∏•‡πâ‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå:

```javascript
// ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Bot Token
localStorage.setItem('telegramBotToken', 'YOUR_BOT_TOKEN_HERE');

// ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Chat ID
localStorage.setItem('telegramChatId', 'YOUR_CHAT_ID_HERE');

// ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô (‡πÄ‡∏ä‡πà‡∏ô 18:00)
localStorage.setItem('telegramReportTime', '18:00');

// ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
localStorage.setItem('telegramAutoSend', 'true');
```

## ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ "üìà ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏¢‡∏≠‡∏î‡πÄ‡∏ó‡∏£‡∏î"
2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
3. ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° "üì§ ‡∏™‡πà‡∏á‡πÑ‡∏õ Telegram"
4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Telegram ‡∏ß‡πà‡∏≤‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

## ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 5: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡πà‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô)

### ‡πÉ‡∏ä‡πâ Cron Job (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Linux/Mac)

‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `send_daily_report.sh`:

```bash
#!/bin/bash

# ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
API_URL="http://localhost:5000/api/report"
TELEGRAM_API="http://localhost:5000/api/send-telegram"
BOT_TOKEN="YOUR_BOT_TOKEN"
CHAT_ID="YOUR_CHAT_ID"

# ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ
DATE=$(date +%Y-%m-%d)

# ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
REPORT=$(curl -s "$API_URL?dateStart=$DATE&dateEnd=$DATE&customerSign=")

# ‡∏™‡πà‡∏á‡πÑ‡∏õ Telegram
curl -X POST "$TELEGRAM_API" \
  -H "Content-Type: application/json" \
  -d "{
    \"botToken\": \"$BOT_TOKEN\",
    \"chatId\": \"$CHAT_ID\",
    \"message\": \"$REPORT\"
  }"
```

‡∏ï‡∏±‡πâ‡∏á Cron Job (‡∏™‡πà‡∏á‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô 18:00):
```bash
crontab -e
```

‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ:
```
0 18 * * * /path/to/send_daily_report.sh
```

### ‡πÉ‡∏ä‡πâ Task Scheduler (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Windows)

1. ‡πÄ‡∏õ‡∏¥‡∏î Task Scheduler
2. Create Basic Task
3. ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠ "Send Trade-In Report"
4. Trigger: Daily ‡πÄ‡∏ß‡∏•‡∏≤ 18:00
5. Action: Start a program
6. Program: `python`
7. Arguments: `/path/to/send_report.py`

‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `send_report.py`:

```python
import requests
from datetime import datetime

# ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
API_URL = "http://localhost:5000/api/report"
TELEGRAM_API = "http://localhost:5000/api/send-telegram"
BOT_TOKEN = "YOUR_BOT_TOKEN"
CHAT_ID = "YOUR_CHAT_ID"

# ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ
today = datetime.now().strftime("%Y-%m-%d")

# ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
response = requests.get(f"{API_URL}?dateStart={today}&dateEnd={today}&customerSign=")
report_data = response.json()

# ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
message = f"""üìä ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏¢‡∏≠‡∏î‡πÄ‡∏ó‡∏£‡∏î
üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: {today}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üìà ‡∏™‡∏£‡∏∏‡∏õ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°
‚Ä¢ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: {report_data['report']['totalCount']} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
‚Ä¢ ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡∏Å‡∏•‡∏á: {report_data['report']['confirmedCount']} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
‚Ä¢ ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏Å‡∏•‡∏á: {report_data['report']['notConfirmedCount']} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£

üë§ ‡∏™‡∏£‡∏∏‡∏õ‡∏ï‡∏≤‡∏°‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô
"""

# ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô
for sale_code, info in report_data['report']['salesSummary'].items():
    confirmed = info['confirmedCount']
    total = info['count']
    not_confirmed = total - confirmed
    message += f"{sale_code}: {total} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (‚úÖ{confirmed} ‚ùå{not_confirmed})\n"

message += "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"

# ‡∏™‡πà‡∏á‡πÑ‡∏õ Telegram
requests.post(TELEGRAM_API, json={
    "botToken": BOT_TOKEN,
    "chatId": CHAT_ID,
    "message": message
})

print("‚úÖ ‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!")
```

## üéØ ‡∏™‡∏£‡∏∏‡∏õ

‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß:
- ‚úÖ ‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á: ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° "üì§ ‡∏™‡πà‡∏á‡πÑ‡∏õ Telegram"
- ‚úÖ ‡∏™‡πà‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô: ‡πÉ‡∏ä‡πâ Cron Job ‡∏´‡∏£‡∏∑‡∏≠ Task Scheduler
- ‚úÖ ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÉ‡∏ô Telegram ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ 18:00

## üîß Troubleshooting

### ‡∏™‡πà‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Bot Token ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Chat ID ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Å‡∏î Start bot ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á

### ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ bot ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å block
- ‡∏•‡∏≠‡∏á‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏õ‡∏´‡∏≤ bot ‡∏Å‡πà‡∏≠‡∏ô
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Chat ID ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á

## üìö ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°
- Telegram Bot API: https://core.telegram.org/bots/api
- BotFather Commands: https://core.telegram.org/bots#6-botfather
